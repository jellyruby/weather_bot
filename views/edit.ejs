<!doctype html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

    <title>Hello, world!</title>
  </head>
  <body>
    <%-include('nav.html'); %>

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">오늘 할일 수정</h1>
            <p class="lead">This is a modified jumbotron that occupies the entire horizontal space of its parent.</p>
        </div>
    </div>
    
    <div class="container mt-3">
        <form action="/add?_method=PUT" method="post">
          <input type="hidden" id="id" value="<%= data._id%>" />
          <div class="form-group">
            <label>오늘의 할일</label>
            <input type="text" class="form-control" name = "title" value="<%= data.title%>">
          </div>
          <div class="form-group">
            <label>날짜</label>
            <input type="text" class="form-control" name = "date"  value="<%= data.date%>">
          </div>
          <button type="button" class="btn btn-outline-secondary edit">수정</button>
        </form>
      </div>

    <script>

  $('.edit').on('click', function () {

    var id =  $('#id').val();
    var title = $('input[name=title]').val();
    var date = $('input[name=date]').val();
    $.ajax({
      url: '/todo',
      method: 'put',
      data: {
        _id: id,
        title: title,
        date: date,
      },

    }).done(function (result) {
      console.log('성공했어염');
      location.href="/list";
    }).fail(function (xhr, TextStatus, errThrown) {
      console.log('실패');
    })

});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
  </body>

</html>